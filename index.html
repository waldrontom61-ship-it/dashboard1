<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YMCA Dashboard with Admin Panel</title>
    <style>
        /* === KEEP ALL YOUR EXISTING CSS EXACTLY AS IS === */
        * { margin:0; padding:0; box-sizing:border-box; }
        html, body { height:100%; overflow:hidden; }
        body { box-sizing:border-box; font-family: system-ui, -apple-system, sans-serif; }
        .main-layout { display:flex; height:100vh; background:black; }
        .content-area { width:70%; background:#111827; display:flex; align-items:center; justify-content:center; position:relative; overflow:hidden; }
        .sidebar-overlay { width:30%; height:100vh; background:linear-gradient(to bottom, #dc2626, #991b1b); color:white; display:flex; flex-direction:column; overflow:hidden; position:relative; }
        .sidebar-footer { background:#7f1d1d; padding:1rem; display:flex; justify-content:space-between; align-items:center; border-top:1px solid rgba(255,255,255,0.2); }
        .footer-time { font-size:0.875rem; font-weight:600; }
        .footer-date { font-size:0.75rem; opacity:0.8; margin-top:0.25rem; }
        .footer-weather { display:flex; align-items:center; gap:0.5rem; font-size:0.875rem; }
        .footer-weather-icon { font-size:1.25rem; }
        /* Sidebar header & logo */
        .sidebar-header { background:rgba(0,0,0,0.3); padding:1rem; text-align:center; }
        .sidebar-logo { max-width:200px; height:auto; margin-bottom:0.5rem; }
        .sidebar-title { font-size:1.5rem; font-weight:bold; margin-bottom:0.5rem; }
        /* Content sections */
        .content-section { padding:1rem; flex:1; display:flex; flex-direction:column; overflow:hidden; }
        .classes-section { flex:1; overflow:hidden; margin-bottom:1rem; display:flex; flex-direction:column; }
        .classes-container { flex:1; overflow:hidden; }
        .announcements-section { flex-shrink:0; }
        .section-title { font-size:1rem; font-weight:bold; margin-bottom:0.75rem; border-bottom:1px solid rgba(255,255,255,0.3); padding-bottom:0.25rem; text-align:center; }
        .info-card { background: rgba(255,255,255,0.2); border-radius:0.5rem; padding:0.5rem; margin-bottom:0.5rem; backdrop-filter: blur(10px); border:1px solid rgba(255,255,255,0.1); }
        .card-title { font-weight:600; margin-bottom:0.125rem; font-size:0.95rem; }
        .card-subtitle { font-size:0.85rem; opacity:0.9; }
        .card-meta { font-size:0.725rem; opacity:0.7; margin-top:0.125rem; }
        .cancelled-class { background: rgba(239,68,68,0.3) !important; border:2px solid #ef4444 !important; position:relative; }
        .cancelled-badge { background:#ef4444; color:white; padding:0.25rem 0.5rem; border-radius:0.25rem; font-size:0.75rem; font-weight:bold; margin-top:0.5rem; display:inline-block; }
        .cancelled-overlay { position:absolute; top:0; left:0; right:0; bottom:0; background: rgba(239,68,68,0.1); border-radius:0.5rem; display:flex; align-items:center; justify-content:center; }
        .cancelled-text { background:#ef4444; color:white; padding:0.5rem 1rem; border-radius:0.25rem; font-weight:bold; font-size:0.875rem; transform:rotate(-15deg); box-shadow:0 4px 8px rgba(0,0,0,0.2); }
        .weather-display { display:flex; align-items:center; justify-content:space-between; background: rgba(255,255,255,0.15); border-radius:0.75rem; padding:1rem; margin-bottom:1rem; }
        .weather-icon { font-size:2rem; }
        .weather-temp { font-size:1.5rem; font-weight:bold; }
        .weather-condition { font-size:0.875rem; opacity:0.9; }
        .announcement-container { position:relative; height:80px; overflow:hidden; border-radius:0.5rem; }
        .announcement-slide { position:absolute; top:0; left:0; width:100%; padding:0.75rem; border-radius:0.5rem; backdrop-filter:blur(10px); border:1px solid rgba(255,255,255,0.1); opacity:0; transform:translateY(20px); transition:all 0.5s ease-in-out; }
        .announcement-slide.active { opacity:1; transform:translateY(0); }
        .urgent-announcement { background: linear-gradient(135deg,#dc2626,#991b1b); border:2px solid #ef4444; box-shadow:0 0 15px rgba(220,38,38,0.3); }
        .warning-announcement { background: linear-gradient(135deg,#f59e0b,#d97706); border:2px solid #fbbf24; box-shadow:0 0 15px rgba(245,158,11,0.3); }
        .good-announcement { background: linear-gradient(135deg,#059669,#047857); border:2px solid #10b981; box-shadow:0 0 15px rgba(5,150,105,0.3); }
        .media-container { position:relative; width:100%; height:100%; overflow:hidden; }
        .media-slide { position:absolute; top:0; left:0; width:100%; height:100%; opacity:0; transition:opacity 1s ease-in-out; display:flex; align-items:center; justify-content:center; }
        .media-slide.active { opacity:1; }
        .media-slide img { width:100%; height:100%; object-fit:cover; }
        /* Admin toggle, panel, forms, tables, buttons ... KEEP EXACTLY AS IS */
        /* ... (omitted here to save space, copy all your existing CSS from your HTML) ... */
    </style>
</head>
<body>
    <!-- Admin Toggle -->
    <button class="admin-toggle" onclick="toggleAdmin()">‚öôÔ∏è</button>

    <!-- Main Layout -->
    <div class="main-layout">
        <!-- Content Area (70%) -->
        <div class="content-area">
            <div class="media-container" id="media-container"></div>
        </div>

        <!-- Sidebar Overlay (30%) -->
        <div class="sidebar-overlay">
            <div class="sidebar-header">
                <img src="https://ymcasaskatoon.org/wp-content/uploads/2022/06/Shine-On_Horiz_white_RGB_Saskatoon-scaled.png" 
                     alt="YMCA of Saskatoon Logo" 
                     class="sidebar-logo"
                     onerror="this.style.display='none'; document.getElementById('gymNameDisplay').style.display='block';">
                <h2 class="sidebar-title" id="gymNameDisplay" style="display:none;">YMCA of Saskatoon</h2>
            </div>

            <div class="content-section">
                <div class="classes-section">
                    <h3 class="section-title">üïê TODAY'S CLASSES</h3>
                    <div id="classes-container"></div>
                </div>
                <div class="announcements-section">
                    <h3 class="section-title">üì¢ ANNOUNCEMENTS</h3>
                    <div class="announcement-container" id="announcement-container"></div>
                </div>
            </div>

            <div class="sidebar-footer">
                <div>
                    <div class="footer-time" id="currentTime">--:--</div>
                    <div class="footer-date" id="currentDate">Loading...</div>
                </div>
                <div class="footer-weather" id="weather-display">
                    <span class="footer-weather-icon" id="weather-icon">‚õÖ</span>
                    <span id="weather-temp">--¬∞C</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel ... KEEP EXACTLY AS IS -->
    <!-- ... copy your existing admin panel HTML here ... -->

    <script>
        // ======== DASHBOARD DATA ========
        let dashboardData = {
            settings: { gymName:"YMCA of Saskatoon", rotationSpeed:4, mediaRotationSpeed:8 },
            media: [ { type:"video", src:"https://drive.google.com/uc?export=download&id=1kW5HyV6pcuiRAv1byuyZGMvnbXilekqT", duration:163, permanent:true } ],
            weekly_schedule: {
                Monday:[ { time:"9:00 AM - 9:45 AM", event:"NEW CLASS OCT 20Y-Cycle", location:"Cycle Studio", instructor:"Sarah" },
                         { time:"9:00 AM - 9:45 AM", event:"Aquafit", location:"Pool", instructor:"Mike" },
                         { time:"10:00 AM - 10:45 AM", event:"NEW CLASS OCT 20 Tabata Blast", location:"Studio A", instructor:"Jessica" },
                         { time:"12:10 PM - 12:50 PM", event:"Y-Fit Circuit", location:"Gym Floor", instructor:"David" },
                         { time:"6:15 PM - 7:30 PM", event:"Beginner Yoga", location:"Studio B", instructor:"Emma" } ],
                // Repeat for other days...
            },
            classes: [],
            announcements: [
                { id:1, title:"üèä Pool Hours", message:"Open swim available daily", details:"6 AM - 10 PM Mon-Fri, 8 AM - 8 PM weekends", severity:"good", permanent:true },
                { id:2, title:"üì± Download Our App", message:"Book classes and track workouts", details:"iOS and Android", severity:"good", permanent:true }
            ]
        };

        // ======== LOCAL STORAGE ========
        function loadLocalData() {
            const saved = localStorage.getItem("ymcaDashboardData");
            if(saved){
                const localData = JSON.parse(saved);
                dashboardData.classes = [...getTodaysClasses(), ...(localData.classes || [])];
                if(localData.media) dashboardData.media = [...dashboardData.media, ...localData.media];
                if(localData.announcements) dashboardData.announcements = [...dashboardData.announcements, ...localData.announcements];
            } else {
                dashboardData.classes = getTodaysClasses();
            }
        }
        function getTodaysClasses() {
            const now = new Date(new Date().toLocaleString("en-US",{timeZone:"America/Regina"}));
            const today = now.toLocaleDateString("en-US",{ weekday:"long"});
            const todaysSchedule = dashboardData.weekly_schedule[today] || [];
            return todaysSchedule.map((c,i)=>({ id:`schedule_${today}_${i}`, name:c.event, time:c.time, location:c.location, instructor:c.instructor, cancelled:false, fromSchedule:true }));
        }
        function saveData(){
            const tempData = { classes: dashboardData.classes.filter(c=>!c.fromSchedule), announcements: dashboardData.announcements.filter(a=>!a.permanent), media: dashboardData.media.filter(m=>!m.permanent) };
            localStorage.setItem("ymcaDashboardData", JSON.stringify(tempData));
        }

        // ======== RENDER FUNCTIONS ========
        function renderClasses(){
            const container = document.getElementById("classes-container");
            container.innerHTML="";
            dashboardData.classes.forEach(c=>{
                const div = document.createElement("div");
                div.className="info-card";
                if(c.cancelled) div.classList.add("cancelled-class");
                div.innerHTML=`<div class="card-title">${c.name}</div>
                               <div class="card-subtitle">${c.time} | ${c.location} | ${c.instructor}</div>`;
                container.appendChild(div);
            });
        }

        function renderAnnouncements(){
            const container = document.getElementById("announcement-container");
            container.innerHTML="";
            dashboardData.announcements.forEach((a,i)=>{
                const div = document.createElement("div");
                div.className="announcement-slide "+a.severity+"-announcement";
                if(i===0) div.classList.add("active");
                div.innerHTML=`<strong>${a.title}</strong><br>${a.message}`;
                container.appendChild(div);
            });
            rotateAnnouncements();
        }

        function rotateAnnouncements(){
            const slides = document.querySelectorAll(".announcement-slide");
            let idx=0;
            setInterval(()=>{
                slides.forEach(s=>s.classList.remove("active"));
                idx=(idx+1)%slides.length;
                slides[idx].classList.add("active");
            },5000);
        }

        function updateTime(){
            const now = new Date(new Date().toLocaleString("en-US",{timeZone:"America/Regina"}));
            const time = now.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
            const date = now.toLocaleDateString([], {weekday:'long',month:'short',day:'numeric'});
            document.getElementById("currentTime").textContent = time;
            document.getElementById("currentDate").textContent = date;
        }

        function renderWeather(){
            // Placeholder static data, replace with API if needed
            document.getElementById("weather-icon").textContent="‚õÖ";
            document.getElementById("weather-temp").textContent="22¬∞C";
        }

        function rotateMedia(){
            const container = document.getElementById("media-container");
            let idx=0;
            function showSlide(i){
                container.innerHTML="";
                const media = dashboardData.media[i];
                const div = document.createElement("div");
                div.className="media-slide active";
                if(media.type==="video"){
                    const v = document.createElement("video");
                    v.src=media.src;
                    v.autoplay=true;
                    v.muted=true;
                    v.loop=true;
                    v.style.width="100%";
                    v.style.height="100%";
                    v.style.objectFit="cover";
                    div.appendChild(v);
                } else if(media.type==="image"){
                    const img = document.createElement("img");
                    img.src=media.src;
                    div.appendChild(img);
                }
                container.appendChild(div);
            }
            showSlide(0);
            setInterval(()=>{
                idx=(idx+1)%dashboardData.media.length;
                showSlide(idx);
            }, dashboardData.settings.mediaRotationSpeed*1000);
        }

        function toggleAdmin(){ alert("Admin panel toggle placeholder"); }

        // ======== INIT ========
        loadLocalData();
        renderClasses();
        renderAnnouncements();
        updateTime();
        renderWeather();
        rotateMedia();
        setInterval(updateTime,60000);
    </script>
</body>
</html>
